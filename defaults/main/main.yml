---
###############################################################################
# PiHole Service Configuration
###############################################################################
# Install size: ~30MB
#     PiHole: ~200KB.
#   Packages: ~30MB.

# PiHole FTL (TOML) Release.
#
# Role will halt execution if installed FTL (TOML) version does not match.
#
# Versions (Schematic):
#       MAJOR: Unsafe - requires major updates; only default MAJOR version
#              is supported.
#       MINOR: Safe - Usually requires no role updates.
#       PATCH: Safe - Usually requires no role updates.
#   RECOMMEND: Only increment MINOR/PATCH. Never use 'any'.
#
# Values:
#   {VERSION}: TOML release to use ('v6.3.2').
#         any: Do not halt on TOML updates. Very likely to break.
#
# Default: 'v6.3.2'.
pihole_srv_version: 'v6.3.2'

# Apply PiHole updates? Default: True.
#
# Reference:
# * https://docs.pi-hole.net/main/update
pihole_srv_update_enable: true

# Apply Gravity updates?
#
# pihole_cfg_mgmt_lists changes require gravity updates to be populated. Run
# after all configuration is complete.
#
# Default: True.
#
# Reference:
# * https://docs.pi-hole.net/main/update
pihole_srv_gravity_update_enable: true

# Display 2FA TOTP QR code?
#
# Requires: pihole_cfg_webserver_api_totp_secret set.
#
# Print QR code and ASCII secret during role execution for end user setup.
#
# Default: True.
pihole_srv_totp_display_enable: true

# Stop PiHole during configuration?
#
# In certain virtualization cases pre-existing PiHole installations may not
# pickup config file changes and require the service to be restarted.
#
# Enabling WILL cause service interruption.
#
# Default: False.
pihole_srv_service_restart_enable: false

###############################################################################
# REST API
###############################################################################

# PiHole API endpoint to use for service configuration.
#
# Default: 'https://localhost:443/api'
pihole_srv_api: 'https://localhost:443/api'

# Enable API configuration?
#
# Requires:
# * pihole_srv_api set.
# * pihole_cfg_webserver_api_totp_secret set.
# * pihole_cfg_webserver_api_app_pwhash or pihole_cfg_webserver_api_pwhash set.
#
# Disabling will skip all tasks which require REST API use.
#
# Default: True.
pihole_srv_api_config_enable: true

# Enable API certificate validation?
#
# Requires pihole_cfg_webserver_tls_cert set.
#
# PiHole generates self-signed TLS/SSL certificates which do not validate.
#
# Default: False.
pihole_srv_api_validate_enable: false

###############################################################################
# User
###############################################################################

# Create restricted PiHole user?
#
# Install a modified pihole user with additional restrictions.
#
# Changes:
# * UID: 123 (default: 997).
# * GID: 123 (default: auto).
# * home: /nonexistent (default: /home/pihole).
#
# Default: True.
pihole_srv_create_user: true
